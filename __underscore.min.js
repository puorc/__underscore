"use strict";function _toConsumableArray(r){if(Array.isArray(r)){for(var t=0,e=Array(r.length);t<r.length;t++)e[t]=r[t];return e}return Array.from(r)}function isAvailable(r){return null!==r&&void 0!==r.length&&r.length>0}function first(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(isAvailable(r))return 1===t?r[0]:initial(r,r.length-t)}function initial(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(isAvailable(r))return Array.prototype.slice.call(r,0,Math.max(0,r.length-t))}function last(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(isAvailable(r))return 1===t?r[r.length-1]:rest(r,Math.max(0,r.length-t))}function rest(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(isAvailable(r))return Array.prototype.slice.call(r,t)}function compact(r){if(isAvailable(r))return Array.prototype.filter.call(r,function(r){return Boolean(r)})}function flatten(r,t){if(isAvailable(r))return t=t||[],Array.prototype.forEach.call(r,function(r){Array.isArray(r)?flatten(r,t):t.push(r)}),t}function without(r){for(var t=arguments.length,e=Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];if(isAvailable(r))return Array.prototype.filter.call(r,function(r){return!e.some(function(t){return t===r})})}function union(){for(var r=new Set,t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.forEach(function(t){return t.forEach(function(t){return r.add(t)})}),Array.from(r)}function intersection(){for(var r=function(r,t){return r.some(function(r){return r===t})},t=[],e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];var o=!0,a=!1,u=void 0;try{for(var f,l=n[0][Symbol.iterator]();!(o=(f=l.next()).done);o=!0)(function(e){if(r(t,e))return"continue";n.every(function(t){return r(t,e)})&&t.push(e)})(f.value)}catch(r){a=!0,u=r}finally{try{!o&&l.return&&l.return()}finally{if(a)throw u}}return t}function difference(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return without.apply(void 0,[r].concat(_toConsumableArray(t)))}function zip(){for(var r=arguments.length,t=Array(r),e=0;e<r;e++)t[e]=arguments[e];var n=[];if(0===t.length)return null;if(1===t.length)return t[0];if(!t.every(function(r){return r.length===t[0].length}))return null;for(var i=0;i<t[0].length;i++){for(var o=[],a=0;a<t.length;a++)o.push(t[a][i]);n.push(o)}return n}function unzip(r){return zip.apply(void 0,_toConsumableArray(r))}function object(r,t){var e={};return Array.isArray(r)&&Array.isArray(t)&&r.forEach(function(r,n){e[r]=t[n]}),e}function range(){var r=[],t=0,e=1,n=0;switch(arguments.length){case 1:n=arguments[0];break;case 2:t=arguments[0],n=arguments[1];break;case 3:t=arguments[0],n=arguments[1],e=arguments[2];break;default:return}for(var i=t;Math.abs(i)<Math.abs(n);i+=e)r.push(i);return r}function determineType(r){return void 0!==r.length?TYPE.array_like:null!==r&&"object"===(void 0===r?"undefined":_typeof(r))?TYPE.object:TYPE.others}function each(r,t,e){var n=t;switch(void 0!==e&&(n=t.bind(e)),determineType(r)){case TYPE.array_like:for(var i=0;i<r.length;i++)n(r[i],i,r);break;case TYPE.object:for(var o in r)n(r[o],o,r);break;case TYPE.others:default:return}}function map(r,t,e){var n=t,i=[];switch(void 0!==e&&(n=t.bind(e)),determineType(r)){case TYPE.array_like:for(var o=0;o<r.length;o++)i.push(n(r[o],o,r));break;case TYPE.object:for(var a in r)i.push(n(r[a],a,r));break;case TYPE.others:}return i}function reduce(r,t,e,n){void 0!==n&&t.bind(n);for(var i=0;i<r.length;i++);}function filter(r,t,e){var n=[];switch(void 0!==e&&t.bind(e),determineType(r)){case TYPE.array_like:for(var i=0;i<r.length;i++)t(r[i])&&n.push(r[i]);break;case TYPE.object:for(var o in r)t(r[o])&&n.push(r[o]);break;case TYPE.others:default:return}return n}function every(r,t,e){switch(void 0!==e&&t.bind(e),determineType(r)){case TYPE.array_like:for(var n=0;n<r.length;n++)if(!t(r[n]))return!1;break;case TYPE.object:for(var i in r)if(!t(r[i]))return!1;break;case TYPE.others:}return!0}function some(r,t,e){switch(void 0!==e&&t.bind(e),void 0===t&&(t=Boolean),determineType(r)){case TYPE.array_like:for(var n=0;n<r.length;n++)if(t(r[n]))return!0;break;case TYPE.object:for(var i in r)if(t(r[i]))return!0;break;case TYPE.others:}return!1}function pluck(r,t){return map(r,function(r){if(t in r)return r[t]})}function max(r,t,e){var n,i,o=t;switch(void 0!==e&&(o=t.bind(e)),determineType(r)){case TYPE.array_like:for(var a=!0,u=0;u<r.length;u++)"number"==typeof o(r[u],u,r)&&(a&&(n=o(r[u],u,r),i=r[u],a=!1),o(r[u],u,r)>n&&(n=o(r[u],u,r),i=r[u]));break;default:return}return i}function sample(r,t){if(determineType(r)===TYPE.array_like){if(void 0===t)return r[utility.random(r.length-1)];for(var e=[],n=0;n<t;n++)e.push(utility.random(r.length-1));return e}}function toArray(r){return Array.prototype.slice.call(r)}function size(r){switch(determineType(r)){case TYPE.array_like:return r.length;case TYPE.object:return Object.keys(r).length}}function partition(r,t){if(!(!r instanceof Array)){for(var e=[],n=[],i=[],o=0;o<r.length;o++)t(r[o])?e.push(r[o]):n.push(r[o]);return i.push(e),i.push(n),i}}function bind(r,t){for(var e=arguments.length,n=Array(e>2?e-2:0),i=2;i<e;i++)n[i-2]=arguments[i];return function(){return r.apply(t,n)}}function partial(r){for(var t=arguments.length,e=Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return bind.apply(void 0,[r,this].concat(e))}function delay(r,t){for(var e=arguments.length,n=Array(e>2?e-2:0),i=2;i<e;i++)n[i-2]=arguments[i];return setTimeout.apply(void 0,[r,t].concat(n))}function defer(r){for(var t=arguments.length,e=Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return delay.apply(void 0,[r].concat(e))}function once(r){return function t(){if(t.isCalled)return t.value;t.isCalled=!0,t.value=r()}}function after(r,t){return function e(){if(e.calledTimes){if(!(calledTimes<r))return t()}else e.calledTimes=1}}function before(r,t){return function e(){if(!e.calledTimes)return e.calledTimes=1,t();if(e.calledTimes<r){var n=t();return(e.calledTimes=r-1)&&(e.value=n),n}}}function negate(r){return function(){return!r()}}function compose(){for(var r=arguments.length,t=Array(r),e=0;e<r;e++)t[e]=arguments[e];return function(r){for(var e=t[0](r),n=1;n<t.length;n++)e=t[n](e);return e}}function _toConsumableArray(r){if(Array.isArray(r)){for(var t=0,e=Array(r.length);t<r.length;t++)e[t]=r[t];return e}return Array.from(r)}function keys(r){return Object.keys(r)}function allKeys(r){var t=[],e=r;for(t.push.apply(t,_toConsumableArray(Object.keys(r)));null!==Object.getPrototypeOf(e);)t.push.apply(t,_toConsumableArray(Object.keys(Object.getPrototypeOf(e)))),e=Object.getPrototypeOf(e);return t}function values(r){var t=[];for(var e in r)t.push(r[e]);return t}function pairs(r){var t=[];for(var e in r){var n=[];n.push(e,r[e]),t.push(n)}return t}function invert(r){var t={};for(var e in r)t[r[e]]=e;return t}function functions(r){var t=[];for(var e in r)"function"==typeof r[e]&&t.push(e);return t}function extend(r){if(void 0===r)return null;for(var t=arguments.length,e=Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return e.forEach(function(t){for(var e in t)r[e]=t[e]}),r}function pick(r){for(var t={},e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(var o=0;o<n.length;o++){if(isString(n[o]))for(var a in r)a===n[o]&&(t[a]=r[a]);if(isFunction(n[o]))for(var u in r)n[o](r[u],u,r)&&(t[u]=r[u])}return t}function omit(r){for(var t={},e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(var o=0;o<n.length;o++){if(isString(n[o]))for(var a in r)a!==n[o]&&(t[a]=r[a]);if(isFunction(n[o]))for(var u in r)n[o](r[u],u,r)||(t[u]=r[u])}return t}function defaults(r){for(var t=arguments.length,e=Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return e.forEach(function(t){if(isObject(t))for(var e in t)void 0===r[e]&&(r[e]=t[e])}),r}function clone(r){return isObject(r)?isArray(r)?r.slice():extend({},r):r}function property(r){return function(t){return t[r]}}function isEqual(r,t){return isEq(r,t)}function isEq(r,t){if(r===t)return 0!==r||1/r==1/bo;if(null==r||null==t)return!1;if(r!==r)return t!==t;var e=void 0===r?"undefined":_typeof(r);return("function"===e||"object"===e||"function"==typeof t||"object"===(void 0===t?"undefined":_typeof(t)))&&deepEq(r,t)}function deepEq(r,t){var e=Object.prototype.toString.call(r);if(e!==Object.prototype.toString.call(t))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+r==""+t;case"[object Number]":return isEq(+r,+t);case"[object Date]":case"[object Boolean]":return+r==+t;case"[object Symbol]":return Symbol.prototype.valueOf.call(r)===Symbol.prototype.valueOf.call(t);case"[object Array]":if(r.length!==t.length)return!1;for(var n=0;n<length;n++)if(!isEq(r[n],t[n]))return!1;return!0;default:var i=Object.getOwnPropertyNames(r),o=!0,a=!1,u=void 0;try{for(var f,l=i[Symbol.iterator]();!(o=(f=l.next()).done);o=!0){var c=f.value;if(!(c in t&&isEq(r[c],t[c])))return!1}}catch(r){a=!0,u=r}finally{try{!o&&l.return&&l.return()}finally{if(a)throw u}}return!0}}function isMatch(r,t){for(var e in t)if(!isEqual(r[e],t[e]))return!1;return!0}function isEmpty(r){return null===r||(void 0!==r.length?0===r.length:0===Object.keys(r).length)}function isArray(r){return Array.isArray(r)||r instanceof Array}function isFunction(r){return"function"==typeof r}function isObject(r){return"object"===(void 0===r?"undefined":_typeof(r))&&!isArray(r)&&!isFunction(r)}function isString(r){return"string"==typeof r}function isNumber(r){return"number"==typeof r}function isBoolean(r){return"boolean"==typeof r}function isDate(r){return"[object Date]"===Object.prototype.toString.call(r)}function isRegExp(r){return"[object RegExp]"===Object.prototype.toString.call(r)}function isError(r){return"[object Error]"===Object.prototype.toString.call(r)}function isNaN(r){return r!==r}function isNull(r){return null===r}function isUndefine(r){return 1===arguments.length&&void 0===r}function isFinite(r){return isNumber(r)&&r!==1/0&&r!==-1/0}function constant(r){return function(){return r}}function random(r,t){var e,n,i;if(2===arguments.length)e=arguments[0],n=arguments[1];else{if(1!==arguments.length)return;e=0,n=arguments[0]}return i=n-e,Math.ceil(Math.random()*i+e)}function result(r,t,e){return void 0!==r[t]?"function"==typeof r[t]?r[t](r):r[t]:void 0!==e?"function"==typeof e?e(r):e:void 0}module.exports={first:first,initial:initial,last:last,rest:rest,compact:compact,flatten:flatten,without:without,union:union,intersection:intersection,difference:difference,zip:zip,unzip:unzip,object:object,range:range};var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},utility=require("./utility.js"),TYPE={array_like:Symbol("array_like"),object:Symbol("object"),others:Symbol("others")};module.exports={each:each,map:map,filter:filter,every:every,some:some,pluck:pluck,max:max,sample:sample,toArray:toArray,size:size,partition:partition},module.exports={bind:bind,partial:partial,delay:delay,defer:defer,compose:compose};var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};module.exports={keys:keys,allKeys:allKeys,values:values,pairs:pairs,invert:invert,functions:functions,extend:extend,pick:pick,omit:omit,defaults:defaults,clone:clone,property:property,isEqual:isEqual,isMatch:isMatch,isEmpty:isEmpty,isArray:isArray,isFunction:isFunction,isObject:isObject,isString:isString,isNumber:isNumber,isBoolean:isBoolean,isDate:isDate,isRegExp:isRegExp,isError:isError,isNaN:isNaN,isNull:isNull,isUndefine:isUndefine,isFinite:isFinite},module.exports={constant:constant,random:random,result:result};